apiVersion: v1
kind: Pod
metadata:
  name: fishs-database
  namespace: default
spec:
  initContainers:
    - name: init-database
      image: keywer/microprofile/k3s-init-database:v1.0.0
      command: ['sh', '-c', '/tmp/createDatabase.sh']
      volumeMounts:
        - name: database
          mountPath: /database
  containers:
    - name: fishs-database
      image: keywer/microprofile/k3s-database:v1.0.0
      imagePullPolicy: IfNotPresent
      volumeMounts:
        - name: database
          mountPath: /database
      ports:
        - containerPort: 1521
  volumes:
    - emptyDir: {}
      name: database

---

apiVersion: v1
kind: Service
metadata:
  name: fishs-database
  namespace: default
spec:
  type: NodePort
  ports:
    - name: client
      port: 1521
      protocol: TCP
      targetPort: 1521
  selector:
    app: fishs-database